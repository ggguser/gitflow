<h1>Термины</h1>
<ul>
    <li>Сервис — сущность реализующая часть функционала продукта</li>
    <li>Продукт — совокупность сервисов, реализующая бизнес функционал</li>
    <li>Тикет — задача в джире на разработку фичи или исправление бага</li>
    <li>Ветка тикета — ветка, отщепленная для реализации тикета</li>
</ul>
<h1>Общие заметки</h1>
<ol>
    <li>Версионирование продукта отделено от версионирования его составных частей (сервисов)</li>
    <li>Каждому сервису назначается &quot;владелец&quot;.
        <ul>
            <li>Это роль, своеобразный татем, который может передаваться. В один момент времени владелец один.
                <ol>
                    <li>Это убережёт от демократии и эффекта семи нянек.</li>
                    <li>Это позволит равномерно передавать компетенции внутри команды.</li>
                </ol>
            </li>
            <li>Роль владельца сервиса даётся на 4 спринта (т.е. один БОР-спринт).</li>
            <li>Владелец сервиса выбирается путём анонимного голосования в Телеграме.
                <ol>
                    <li>Если желающих меньше двух, то проводится просто голосование среди всей команды, из кандидатов
                        исключается текущий владелец сервиса.
                    </li>
                </ol>
            </li>
            <li>Функции владельца — проводить ревью мерж реквестов, охраняя сервис от плохого кода.</li>
            <li>Во время &quot;дежурства&quot; владелец несёт ответственность за весь код сервиса.</li>
        </ul>
    </li>
    <li>У каждого сервиса есть репозторий с ansible для поднятия этого сервиса.
        <ul>
            <li>Правка этого репозитория в зоне ответственности разработчика ветки тикета сервиса.</li>
            <li>Возможны отдельные задачи только на ansible-репозиторий</li>
        </ul>
    </li>
    <li>Версионирование сервисов проводится по модели семантического версионирования.<br/>Записывается в следующей
        <ul>нотации: a.b.c (2.1.2).
        <ol>
            <li>номер мажорной версии — ломает обратную совместимость</li>
            <li>номер минорной версии — новые фичи, не ломающие обратную совместимость</li>
            <li>номер патча — исправление багов</li>
        </ol></ul>
    </li>
</ol>
<h1>Этап разработки</h1>
<ol>
    <li>В каждом сервисе изначально есть 2 ветки: development и master.</li>
    <li>Ветки тикетов отщепляются от development и через механизм merge requests вливаются обратно.</li>
    <li>Владелец сервиса получает merge requests, проводит их ревью и, в случае одобрения, вливает изменения в
        development.
    </li>
</ol>
<h1>Этапы тестирования</h1>
<p>Тестирования разделяется на два этапа:</p>
<ol>
    <li>Тестирование фич, реализованных в рамках тикета.
        <ul>
            <li><p>На тестирование передаётся ветка тикета. </p></li>
            <li><p>Тестировщик поднимает сервис используя ansible-репозиторий.</p>
                <ol>
                    <li>Если у задачи есть отдельная ветка в ansible-репозитории, то сервис поднимается с её помощью
                    </li>
                    <li>Если у задачи нет отдельной ветки в ansible-репозитории, то сервис поднимается в ветке
                        development ansible-репозитория
                    </li>
                </ol>
            </li>
            <li><p>Необходимые исправления разработчиками делаются в ветке тикета.</p></li>
        </ul>
    </li>
    <li><p>Тестирование совместимости новой версии сервиса с другими сервисами. </p>
        <ul>
            <li>После первого этапа тестировщик просит владельца сервиса смержить ветку тикета в development ветку.</li>
            <li>В задаче должны быть обозначены затронутые этой задачей сервисы.</li>
            <li>Задачи связанных сервисов объединены в стори (см. JIRA-flow)</li>
            <li>После того как все тикеты спринта слиты в development, тестировщик проверяет их взаимодействие.</li>
            <li><p>Необходимые исправления разработчиками делаются в ветке тикета и подливаются в ветку development.</p>
            </li>
        </ul>
    </li>
</ol>
<h1>Этап деплоя</h1>
<ol>
    <li>После успешного тестирования ветка development вливается в master ветку.</li>
    <li>На базе master создаётся тег.</li>
    <li>По тегу собирается образ.</li>
    <li>В случае необходимости правятся переменные окружения в репозитории с ansible.</li>
    <li>На основании текущих релизных веток формируется &quot;деплой пакет&quot; версии приложения.</li>
</ol>