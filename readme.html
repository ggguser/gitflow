<h1>Термины</h1>
<ul>
    <li>Сервис — сущность реализующая часть функционала продукта</li>
    <li>Продукт — совокупность сервисов, реализующая бизнес функционал</li>
    <li>Тикет — задача в джире на разработку фичи или исправление бага в одном сервисе</li>
    <li>Баг-тикет — недекомопозированная задача в джире на поиск причины неисправности</li>
    <li>Стори — группировка тикетов на разные сервисы в рамках реализации одной задачи для поддержания совместимости
        (см. <a class="confluence-link" href="/pages/viewpage.action?pageId=59475251" data-linked-resource-id="59475251"
                data-linked-resource-version="11" data-linked-resource-type="page"
                data-linked-resource-default-alias="ПСС. J. Новый JIRA-flow"
                data-base-url="https://confluence.rc-online.ru">JIRA-flow</a>)
    </li>
    <li><p>Ветка тикета — ветка, отщепленная для реализации тикета</p></li>
</ul><h1>Владелец сервиса</h1>
<ol>
    <li>Каждому сервису назначается &quot;владелец&quot;.</li>
    <li>Это роль, своеобразный татем, который может передаваться. В один момент времени владелец один.
        <ul>
            <li>Это убережёт от демократии и эффекта семи нянек.</li>
            <li>Это позволит равномерно передавать компетенции внутри команды.</li>
        </ul>
    </li>
    <li>Роль владельца сервиса даётся на 4 спринта (т.е. один БОР-спринт).
        <ul>
            <li>Владелец сервиса выбирается путём анонимного голосования в Телеграме.</li>
            <li>Голосование проводится во время планирования нового БОР-спринта.</li>
            <li>Выбираются только владельцы сервисов, на которые есть тикеты в рамках БОР-спринта.</li>
            <li>Можно быть владельцем нескольких сервисов одновременно.</li>
            <li>Голосование проводится среди всей команды, из кандидатов исключается текущий владелец сервиса.</li>
            <li>Если есть желающий стать владельцем сервиса, голосование отменяется.</li>
            <li>Если желающих стать владельцем сервиса больше одного, проводится голосование среди их кандидатур.</li>
        </ul>
    </li>
    <li>Функции владельца — проводить ревью мерж реквестов, охраняя сервис от плохого кода.</li>
    <li>Во время &quot;дежурства&quot; владелец несёт ответственность за весь код сервиса.</li>
    <li>У каждого сервиса есть репозторий с ansible для поднятия этого сервиса.
        <ul>
            <li>Правка этого репозитория в зоне ответственности разработчика ветки тикета сервиса.</li>
            <li>Возможны отдельные задачи только на ansible-репозитории</li>
        </ul>
    </li>
</ol><h1>Версионирование</h1>
<ol>
    <li>Версионирование продукта отделено от версионирования его составных частей (сервисов)</li>
    <li>Версионирование сервисов проводится по модели семантического версионирования.
        <ul>Записывается в следующей нотации: a.b.c (2.1.2).
        <ol>
            <li>номер мажорной версии — ломает обратную совместимость</li>
            <li>номер минорной версии — новые фичи, не ломающие обратную совместимость</li>
            <li>номер патча — исправление багов</li>
        </ol></ul>
    </li>
    </ol>
</ul><h1>Этап разработки</h1>
<ul>
    <li>В каждом сервисе изначально есть 2 ветки: development и master.</li>
    <li>Ветки тикетов отщепляются от development и через механизм merge requests вливаются обратно.</li>
    <li>Владелец сервиса получает merge requests, проводит их ревью и, в случае одобрения, вливает изменения в
        development.
    </li>
</ul><h1>Работа с багами</h1>
<ul>
    <li>При обнаружении в работе продукта отличий от описанных требований создаётся Баг-тикет. Баг-тикет — это задача на
        поиск и локализацию ошибки в коде.
    </li>
    <li>В результате обработки Баг-тикет должен преобразоваться в:
        <ul>
            <li>Тикет на один сервис
                <ul>
                    <li>Или в</li>
                </ul>
            </li>
            <li>Стори на затронутые сервисы</li>
        </ul>
    </li>
    <li>Дальнейшая работа с Тикетом протекает в обычном режиме.</li>
</ul><h1>Этапы тестирования</h1>Тестирования разделяется на два этапа:
<ul>
    <li>Тестирование фич, реализованных в рамках тикета.
        <ul>
            <li>На тестирование передаётся ветка тикета.</li>
            <li>Тестировщик поднимает сервис используя ansible-репозиторий.
                <ol>
                    <li>Если у задачи есть отдельная ветка в ansible-репозитории, то сервис поднимается с её помощью
                    </li>
                    <li>Если у задачи нет отдельной ветки в ansible-репозитории, то сервис поднимается в ветке
                        development ansible-репозитория
                    </li>
                </ol>
            </li>
            <li>Необходимые исправления разработчиками делаются в ветке тикета.</li>
        </ul>
    </li>
    <li>Тестирование совместимости новой версии сервиса с другими сервисами.
        <ul>
            <li>После первого этапа тестировщик просит владельца сервиса смержить ветку тикета в development ветку.</li>
            <li>В задаче должны быть обозначены затронутые этой задачей сервисы.</li>
            <li>Задачи связанных сервисов объединены в стори (см. <a class="confluence-link"
                                                                     href="/pages/viewpage.action?pageId=59475251"
                                                                     data-linked-resource-id="59475251"
                                                                     data-linked-resource-version="11"
                                                                     data-linked-resource-type="page"
                                                                     data-linked-resource-default-alias="ПСС. J. Новый JIRA-flow"
                                                                     data-base-url="https://confluence.rc-online.ru">JIRA-flow</a>)
            </li>
            <li>После того как все тикеты спринта слиты в development, тестировщик проверяет их взаимодействие.</li>
            <li>Необходимые исправления разработчиками делаются в ветке тикета и подливаются в ветку development.</li>
        </ul>
    </li>
</ul>
    <h1>Этап деплоя</h1>
<ol>
    <li>После успешного тестирования ветка development вливается в master ветку.</li>
    <li>На базе master создаётся тег.</li>
    <li>По тегу собирается образ.</li>
    <li>В случае необходимости правятся переменные окружения в репозитории с ansible.</li>
    <li>Сервис деплоится с помощью ansible-репозитория.</li>
</ol>